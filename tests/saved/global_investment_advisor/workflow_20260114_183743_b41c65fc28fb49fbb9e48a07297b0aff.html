<html>
    <head>
        <meta charset="utf-8">
        
            <script src="lib/bindings/utils.js"></script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css" integrity="sha512-WgxfT5LWjfszlPHXRmBWHkV2eceiWTOBvrKCNbdgDYTHrT2AeLCGbF4sZlZw3UMN3WtL0tGUoIAKsu8mllg/XA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
            <script src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js" integrity="sha512-LnvoEWDFrqGHlHmDD2101OrLcbsfkrzoSpvtSQtxK3RMnRV0eOkhhBN2dXHKRrUU8p2DGRTk35n4O8nWSVe1mQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
            
        
<center>
<h1></h1>
</center>

<!-- <link rel="stylesheet" href="../node_modules/vis/dist/vis.min.css" type="text/css" />
<script type="text/javascript" src="../node_modules/vis/dist/vis.js"> </script>-->
        <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
          crossorigin="anonymous"
        />
        <script
          src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
          crossorigin="anonymous"
        ></script>


        <center>
          <h1></h1>
        </center>
        <style type="text/css">

             #mynetwork {
                 width: 100%;
                 height: 98vh;
                 background-color: #f8fafc;
                 border: 1px solid lightgray;
                 position: relative;
                 float: left;
             }

             

             

             
        </style>
    </head>


    <body>
        <div class="card" style="width: 100%">
            
            
            <div id="mynetwork" class="card-body"></div>
        </div>

        
        

        <script type="text/javascript">

              // initialize global variables.
              var edges;
              var nodes;
              var allNodes;
              var allEdges;
              var nodeColors;
              var originalNodes;
              var network;
              var container;
              var options, data;
              var filter = {
                  item : '',
                  property : '',
                  value : []
              };

              

              

              // This method is responsible for drawing the graph, returns the drawn network
              function drawGraph() {
                  var container = document.getElementById('mynetwork');

                  

                  // parsing and collecting nodes and edges from the python
                  nodes = new vis.DataSet([{"color": "#10b981", "font": {"color": "#111827"}, "id": 1, "label": 1, "shape": "dot", "title": "Step: 1\nType: Tool(current_weather)\n\nTool Name: current_weather\nParameters:\n  - location: Tokyo\n  - forecast_days: 7\n\n"}, {"color": "#8b5cf6", "font": {"color": "#111827"}, "id": 2, "label": 2, "shape": "dot", "title": "Step: 2\nType: LLM call\n\nPrompt:\nBased on the following weather forecasts for Tokyo: {1.forecasts}, determine if the weather is mostly clear (choose \u0026#x27;outdoor\u0026#x27;) or rainy/cloudy (choose \u0026#x27;indoor\u0026#x27;). Respond with only the word outdoor or indoor.\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 3, "label": 3, "shape": "dot", "title": "Step: 3\nType: Tool(get_news)\n\nTool Name: get_news\nParameters:\n  - query: Tokyo outdoor tourism news\n  - max_results: 5\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 4, "label": 4, "shape": "dot", "title": "Step: 4\nType: Tool(get_news)\n\nTool Name: get_news\nParameters:\n  - query: Tokyo indoor entertainment news\n  - max_results: 5\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 5, "label": 5, "shape": "dot", "title": "Step: 5\nType: Tool(analyze_sentiment)\n\nTool Name: analyze_sentiment\nParameters:\n  - text: {3.news}\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 6, "label": 6, "shape": "dot", "title": "Step: 6\nType: Tool(get_stock_price)\n\nTool Name: get_stock_price\nParameters:\n  - symbol: TM\n\n"}, {"color": "#8b5cf6", "font": {"color": "#111827"}, "id": 7, "label": 7, "shape": "dot", "title": "Step: 7\nType: LLM call\n\nPrompt:\nThe stock price for Toyota is {6.price}. If the price is greater than 100, answer with the word gain; otherwise answer with the word loss.\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 8, "label": 8, "shape": "dot", "title": "Step: 8\nType: Tool(calculator)\n\nTool Name: calculator\nParameters:\n  - expression: 50000 * (1 + 0.05)\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 9, "label": 9, "shape": "dot", "title": "Step: 9\nType: Tool(calculator)\n\nTool Name: calculator\nParameters:\n  - expression: 50000 * (1 - 0.10)\n\n"}, {"color": "#8b5cf6", "font": {"color": "#111827"}, "id": 10, "label": 10, "shape": "dot", "title": "Step: 10\nType: LLM call\n\nPrompt:\nCreate a JSON object with fields: city=\u0026#x27;Tokyo\u0026#x27;, sentiment={5.polarity}, price={6.price}, investment_value={8.result if 8 else 9.result}. Respond only with the JSON.\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 11, "label": 11, "shape": "dot", "title": "Step: 11\nType: Tool(current_weather)\n\nTool Name: current_weather\nParameters:\n  - location: London\n  - forecast_days: 7\n\n"}, {"color": "#8b5cf6", "font": {"color": "#111827"}, "id": 12, "label": 12, "shape": "dot", "title": "Step: 12\nType: LLM call\n\nPrompt:\nBased on the following weather forecasts for London: {11.forecasts}, decide \u0026#x27;outdoor\u0026#x27; if the weather is mostly clear, otherwise \u0026#x27;indoor\u0026#x27;. Respond with only the word outdoor or indoor.\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 13, "label": 13, "shape": "dot", "title": "Step: 13\nType: Tool(get_news)\n\nTool Name: get_news\nParameters:\n  - query: London outdoor tourism news\n  - max_results: 5\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 14, "label": 14, "shape": "dot", "title": "Step: 14\nType: Tool(get_news)\n\nTool Name: get_news\nParameters:\n  - query: London indoor entertainment news\n  - max_results: 5\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 15, "label": 15, "shape": "dot", "title": "Step: 15\nType: Tool(analyze_sentiment)\n\nTool Name: analyze_sentiment\nParameters:\n  - text: {13.news}\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 16, "label": 16, "shape": "dot", "title": "Step: 16\nType: Tool(get_stock_price)\n\nTool Name: get_stock_price\nParameters:\n  - symbol: BARC\n\n"}, {"color": "#8b5cf6", "font": {"color": "#111827"}, "id": 17, "label": 17, "shape": "dot", "title": "Step: 17\nType: LLM call\n\nPrompt:\nThe stock price for Barclays is {16.price}. If the price is greater than 100, answer with the word gain; otherwise answer with the word loss.\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 18, "label": 18, "shape": "dot", "title": "Step: 18\nType: Tool(calculator)\n\nTool Name: calculator\nParameters:\n  - expression: 50000 * (1 + 0.05)\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 19, "label": 19, "shape": "dot", "title": "Step: 19\nType: Tool(calculator)\n\nTool Name: calculator\nParameters:\n  - expression: 50000 * (1 - 0.10)\n\n"}, {"color": "#8b5cf6", "font": {"color": "#111827"}, "id": 20, "label": 20, "shape": "dot", "title": "Step: 20\nType: LLM call\n\nPrompt:\nCreate a JSON object with fields: city=\u0026#x27;London\u0026#x27;, sentiment={15.polarity}, price={16.price}, investment_value={18.result if 18 else 19.result}. Respond only with the JSON.\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 21, "label": 21, "shape": "dot", "title": "Step: 21\nType: Tool(current_weather)\n\nTool Name: current_weather\nParameters:\n  - location: New York\n  - forecast_days: 7\n\n"}, {"color": "#8b5cf6", "font": {"color": "#111827"}, "id": 22, "label": 22, "shape": "dot", "title": "Step: 22\nType: LLM call\n\nPrompt:\nBased on the following weather forecasts for New York: {21.forecasts}, decide \u0026#x27;outdoor\u0026#x27; if the weather is mostly clear, otherwise \u0026#x27;indoor\u0026#x27;. Respond with only the word outdoor or indoor.\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 23, "label": 23, "shape": "dot", "title": "Step: 23\nType: Tool(get_news)\n\nTool Name: get_news\nParameters:\n  - query: New York outdoor tourism news\n  - max_results: 5\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 24, "label": 24, "shape": "dot", "title": "Step: 24\nType: Tool(get_news)\n\nTool Name: get_news\nParameters:\n  - query: New York indoor entertainment news\n  - max_results: 5\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 25, "label": 25, "shape": "dot", "title": "Step: 25\nType: Tool(analyze_sentiment)\n\nTool Name: analyze_sentiment\nParameters:\n  - text: {23.news}\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 26, "label": 26, "shape": "dot", "title": "Step: 26\nType: Tool(get_stock_price)\n\nTool Name: get_stock_price\nParameters:\n  - symbol: GS\n\n"}, {"color": "#8b5cf6", "font": {"color": "#111827"}, "id": 27, "label": 27, "shape": "dot", "title": "Step: 27\nType: LLM call\n\nPrompt:\nThe stock price for Goldman Sachs is {26.price}. If the price is greater than 100, answer with the word gain; otherwise answer with the word loss.\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 28, "label": 28, "shape": "dot", "title": "Step: 28\nType: Tool(calculator)\n\nTool Name: calculator\nParameters:\n  - expression: 50000 * (1 + 0.05)\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 29, "label": 29, "shape": "dot", "title": "Step: 29\nType: Tool(calculator)\n\nTool Name: calculator\nParameters:\n  - expression: 50000 * (1 - 0.10)\n\n"}, {"color": "#8b5cf6", "font": {"color": "#111827"}, "id": 30, "label": 30, "shape": "dot", "title": "Step: 30\nType: LLM call\n\nPrompt:\nCreate a JSON object with fields: city=\u0026#x27;New York\u0026#x27;, sentiment={25.polarity}, price={26.price}, investment_value={28.result if 28 else 29.result}. Respond only with the JSON.\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 31, "label": 31, "shape": "dot", "title": "Step: 31\nType: Tool(embed_text)\n\nTool Name: embed_text\nParameters:\n  - texts: [{10.content}, {20.content}, {30.content}]\n  - max_features: 100\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 32, "label": 32, "shape": "dot", "title": "Step: 32\nType: Tool(cluster_data)\n\nTool Name: cluster_data\nParameters:\n  - data: {31.embeddings}\n  - n_clusters: 3\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 33, "label": 33, "shape": "dot", "title": "Step: 33\nType: Tool(compute_statistics)\n\nTool Name: compute_statistics\nParameters:\n  - data: [{6.price}, {16.price}, {26.price}]\n\n"}, {"color": "#8b5cf6", "font": {"color": "#111827"}, "id": 34, "label": 34, "shape": "dot", "title": "Step: 34\nType: LLM call\n\nPrompt:\nGiven the sentiment scores {5.polarity}, {15.polarity}, and {25.polarity}, compute the average. If the average is greater than 0, respond with the word bullish; otherwise respond with the word cautious.\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 35, "label": 35, "shape": "dot", "title": "Step: 35\nType: Tool(write_file)\n\nTool Name: write_file\nParameters:\n  - file_path: investments_bullish.txt\n  - content: Bullish Investment Report\\n\\nCity summaries:\\nTokyo: Sentiment {5.polarity}, Price {6.price}, Investment Value {8.result if 8 else 9.result}\\nLondon: Sentiment {15.polarity}, Price {16.price}, Investment Value {18.result if 18 else 19.result}\\nNew York: Sentiment {25.polarity}, Price {26.price}, Investment Value {28.result if 28 else 29.result}\\n\\nStock Price Statistics: Mean {33.mean}, Median {33.median}, Std {33.std}\\n\\nCluster Labels: {32.labels}\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 36, "label": 36, "shape": "dot", "title": "Step: 36\nType: Tool(write_file)\n\nTool Name: write_file\nParameters:\n  - file_path: investments_caution.txt\n  - content: Cautious Investment Report\\n\\nCity summaries:\\nTokyo: Sentiment {5.polarity}, Price {6.price}, Investment Value {8.result if 8 else 9.result}\\nLondon: Sentiment {15.polarity}, Price {16.price}, Investment Value {18.result if 18 else 19.result}\\nNew York: Sentiment {25.polarity}, Price {26.price}, Investment Value {28.result if 28 else 29.result}\\n\\nStock Price Statistics: Mean {33.mean}, Median {33.median}, Std {33.std}\\n\\nCluster Labels: {32.labels}\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 37, "label": 37, "shape": "dot", "title": "Step: 37\nType: Tool(translate_text)\n\nTool Name: translate_text\nParameters:\n  - text: {35.content if 35 else 36.content}\n  - source_lang: en\n  - target_lang: ja\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 38, "label": 38, "shape": "dot", "title": "Step: 38\nType: Tool(translate_text)\n\nTool Name: translate_text\nParameters:\n  - text: {35.content if 35 else 36.content}\n  - source_lang: en\n  - target_lang: es\n\n"}, {"color": "#3b82f6", "font": {"color": "#111827"}, "id": 39, "label": 39, "shape": "dot", "title": "Step: 39\nType: Tool(send_email)\n\nTool Name: send_email\nParameters:\n  - recipient: investor@portfolio.com\n  - subject: Multi\u2011City Investment Analysis Report\n  - body: Please find attached the investment analysis report.\\n\\nEnglish Summary:\\n{35.content if 35 else 36.content}\\n\\nJapanese Translation:\\n{38.translated_text}\\n\\nSpanish Translation:\\n{39.translated_text}\n\n"}, {"color": "#ef4444", "font": {"color": "#111827"}, "id": 40, "label": 40, "shape": "dot", "title": "Step: 40\nType: Final Step\n\n"}]);
                  edges = new vis.DataSet([{"arrows": "to", "from": 1, "label": "always", "to": 2}, {"arrows": "to", "from": 2, "label": "if response == \u0027outdoor\u0027", "to": 3}, {"arrows": "to", "from": 2, "label": "if response == \u0027indoor\u0027", "to": 4}, {"arrows": "to", "from": 3, "label": "always", "to": 5}, {"arrows": "to", "from": 4, "label": "always", "to": 5}, {"arrows": "to", "from": 5, "label": "always", "to": 6}, {"arrows": "to", "from": 6, "label": "always", "to": 7}, {"arrows": "to", "from": 7, "label": "if response == \u0027gain\u0027", "to": 8}, {"arrows": "to", "from": 7, "label": "if response == \u0027loss\u0027", "to": 9}, {"arrows": "to", "from": 8, "label": "always", "to": 10}, {"arrows": "to", "from": 9, "label": "always", "to": 10}, {"arrows": "to", "from": 10, "label": "always", "to": 11}, {"arrows": "to", "from": 11, "label": "always", "to": 12}, {"arrows": "to", "from": 12, "label": "if response == \u0027outdoor\u0027", "to": 13}, {"arrows": "to", "from": 12, "label": "if response == \u0027indoor\u0027", "to": 14}, {"arrows": "to", "from": 13, "label": "always", "to": 15}, {"arrows": "to", "from": 14, "label": "always", "to": 15}, {"arrows": "to", "from": 15, "label": "always", "to": 16}, {"arrows": "to", "from": 16, "label": "always", "to": 17}, {"arrows": "to", "from": 17, "label": "if response == \u0027gain\u0027", "to": 18}, {"arrows": "to", "from": 17, "label": "if response == \u0027loss\u0027", "to": 19}, {"arrows": "to", "from": 18, "label": "always", "to": 20}, {"arrows": "to", "from": 19, "label": "always", "to": 20}, {"arrows": "to", "from": 20, "label": "always", "to": 21}, {"arrows": "to", "from": 21, "label": "always", "to": 22}, {"arrows": "to", "from": 22, "label": "if response == \u0027outdoor\u0027", "to": 23}, {"arrows": "to", "from": 22, "label": "if response == \u0027indoor\u0027", "to": 24}, {"arrows": "to", "from": 23, "label": "always", "to": 25}, {"arrows": "to", "from": 24, "label": "always", "to": 25}, {"arrows": "to", "from": 25, "label": "always", "to": 26}, {"arrows": "to", "from": 26, "label": "always", "to": 27}, {"arrows": "to", "from": 27, "label": "if response == \u0027gain\u0027", "to": 28}, {"arrows": "to", "from": 27, "label": "if response == \u0027loss\u0027", "to": 29}, {"arrows": "to", "from": 28, "label": "always", "to": 30}, {"arrows": "to", "from": 29, "label": "always", "to": 30}, {"arrows": "to", "from": 30, "label": "always", "to": 31}, {"arrows": "to", "from": 31, "label": "always", "to": 32}, {"arrows": "to", "from": 32, "label": "always", "to": 33}, {"arrows": "to", "from": 33, "label": "always", "to": 34}, {"arrows": "to", "from": 34, "label": "if response == \u0027bullish\u0027", "to": 35}, {"arrows": "to", "from": 34, "label": "if response == \u0027cautious\u0027", "to": 36}, {"arrows": "to", "from": 35, "label": "always", "to": 37}, {"arrows": "to", "from": 36, "label": "always", "to": 37}, {"arrows": "to", "from": 37, "label": "always", "to": 38}, {"arrows": "to", "from": 38, "label": "always", "to": 39}, {"arrows": "to", "from": 39, "label": "always", "to": 40}]);

                  nodeColors = {};
                  allNodes = nodes.get({ returnType: "Object" });
                  for (nodeId in allNodes) {
                    nodeColors[nodeId] = allNodes[nodeId].color;
                  }
                  allEdges = edges.get({ returnType: "Object" });
                  // adding nodes and edges to the graph
                  data = {nodes: nodes, edges: edges};

                  var options = {"nodes": {"font": {"size": 14}, "borderWidth": 2, "shadow": true, "shape": "box"}, "edges": {"arrows": {"to": {"enabled": true}}, "smooth": {"enabled": true, "type": "cubicBezier"}, "width": 2, "shadow": true}, "physics": {"enabled": true, "stabilization": {"enabled": true, "iterations": 1000, "updateInterval": 25}, "solver": "barnesHut", "barnesHut": {"gravitationalConstant": -8000, "centralGravity": 0.3, "springLength": 200, "springConstant": 0.04, "damping": 0.95, "avoidOverlap": 0.2}}, "interaction": {"hover": true, "navigationButtons": true, "keyboard": true}};

                  


                  

                  network = new vis.Network(container, data, options);

                  

                  

                  


                  

                  return network;

              }
              drawGraph();
        </script>
    </body>
</html>